define(["exports", "react", "rxjs", "rxjs/operators"], function (e, t, o, s) {
  "use strict";
  function n(e) {
    return e && "object" == typeof e && "default" in e ? e : { default: e };
  }
  var i = n(t);
  function u(e, t) {
    for (var n = Object.keys(e), r = 0; r < n.length; r++) t(e[n[r]], n[r]);
  }
  function c(e) {
    const r = [];
    return (
      u(e, function (e, t) {
        var n;
        o.isObservable(e) &&
          r.push(
            e.pipe(
              s.map(
                ((n = t),
                function (e) {
                  return { [n]: e };
                })
              )
            )
          );
      }),
      r
    );
  }
  function p(e, t) {
    var n = {};
    return (
      u(e, function (e, t) {
        n[t] = e;
      }),
      u(t, function (e, t) {
        n[t] = e;
      }),
      n
    );
  }
  (e.default = function (r, t) {
    function e() {
      var t = this;
      (this.props$ = new o.BehaviorSubject(p({}, arguments[0]))),
        (this.force$ = new o.Subject()),
        (this.destroyed$ = new o.Subject()),
        (this.streams = []),
        (this.resolved = {});
      var n = o.pipe();
      r({
        props$: t.props$,
        destroyed$: t.destroyed$,
        resolve: function (e) {
          (t.resolved = p({}, e)), (t.streams = c(e || {}));
        },
        setIntercept: function (e) {
          n = e;
        },
      });
      var e = o.of.apply(null, t.streams).pipe(
        s.mergeAll(),
        s.map(function (e) {
          t.resolved = p(t.resolved, e);
        })
      );
      o
        .of(t.props$, e)
        .pipe(s.mergeAll(), s.takeUntil(t.destroyed$), n)
        .subscribe(
          function () {
            t.force$.next();
          },
          function (e) {
            console.error(e);
          }
        ),
        i.default.Component.apply(t, arguments);
    }
    var n = (e.prototype = Object.create(i.default.Component.prototype));
    return (
      (n.constructor = e),
      (n.componentDidMount = function () {
        var e = this;
        e.force$.pipe(s.takeUntil(e.destroyed$)).subscribe(function () {
          e.forceUpdate();
        });
      }),
      (n.componentWillUnmount = function () {
        this.destroyed$.next();
      }),
      (n.shouldComponentUpdate = function (e) {
        return (
          (function (e, t) {
            var n = Object.keys(e),
              r = Object.keys(t);
            if (n.length === r.length) {
              for (var o = 0; o < n.length; o++) if (t[n[o]] !== e[r[o]]) return;
              return 1;
            }
          })(this.props, e) || this.props$.next(p(e, {})),
          !1
        );
      }),
      (n.render = function () {
        var e = p(this.props$.value, this.resolved);
        return i.default.createElement(t, e);
      }),
      e
    );
  }),
    Object.defineProperty(e, "__esModule", { value: !0 });
});
//# sourceMappingURL=index.min.js.map
