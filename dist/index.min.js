define(["exports", "react", "rxjs", "rxjs/operators"], function (e, t, p, c) {
  "use strict";
  function r(e) {
    return e && "object" == typeof e && "default" in e ? e : { default: e };
  }
  var o = r(t);
  function s(e, t, r) {
    for (var n = Object.keys(e), o = 0; o < n.length; o++) {
      var s,
        i = n[o],
        u = e[i];
      p.isObservable(u)
        ? ((s = u.pipe(
            c.map(
              (function (t) {
                return function (e) {
                  return { [t]: e };
                };
              })(i)
            )
          )),
          t.push(s))
        : (r[i] = u);
    }
  }
  function i(e, t) {
    for (var r = {}, n = Object.keys(e), o = Object.keys(t), s = 0; s < n.length; s++)
      r[n[s]] = e[n[s]];
    for (s = 0; s < o.length; s++) r[o[s]] = t[o[s]];
    return r;
  }
  (e.default = function (n, t) {
    function e() {
      var t = this;
      (this.props$ = new p.BehaviorSubject(i({}, arguments[0]))),
        (this.force$ = new p.Subject()),
        (this.destroyed$ = new p.Subject()),
        (this.streams = []),
        (this.resolved = {});
      var r = p.pipe();
      n({
        props$: t.props$,
        destroyed$: t.destroyed$,
        resolve: function (e) {
          s(e || {}, t.streams, t.resolved);
        },
        setIntercept: function (e) {
          r = e;
        },
      });
      var e = p.of.apply(null, t.streams).pipe(
        c.mergeAll(),
        c.map(function (e) {
          t.resolved = i(t.resolved, e);
        })
      );
      p.of
        .apply(null, [t.props$].concat(e))
        .pipe(c.mergeAll(), c.takeUntil(t.destroyed$), r)
        .subscribe(
          function () {
            t.force$.next();
          },
          function (e) {
            console.error(e);
          }
        ),
        o.default.Component.apply(t, arguments);
    }
    var r = (e.prototype = Object.create(o.default.Component.prototype));
    return (
      (r.constructor = e),
      (r.componentDidMount = function () {
        var e = this;
        e.force$.pipe(c.takeUntil(e.destroyed$)).subscribe(function () {
          e.forceUpdate();
        });
      }),
      (r.componentWillUnmount = function () {
        this.destroyed$.next();
      }),
      (r.shouldComponentUpdate = function (e) {
        return (
          (function (e, t) {
            var r = Object.keys(e),
              n = Object.keys(t);
            if (r.length === n.length) {
              for (var o = 0; o < r.length; o++) if (t[r[o]] !== e[n[o]]) return;
              return 1;
            }
          })(this.props, e) || this.props$.next(i(e, {})),
          !1
        );
      }),
      (r.render = function () {
        var e = i(this.props$.value, this.resolved);
        return o.default.createElement(t, e);
      }),
      e
    );
  }),
    Object.defineProperty(e, "__esModule", { value: !0 });
});
//# sourceMappingURL=index.min.js.map
