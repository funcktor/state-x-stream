define(["exports", "react", "rxjs", "rxjs/operators"], function (n, a, p, f) {
  function s(o) {
    return function (n) {
      for (var t = Object.keys(n), r = 0; r < t.length; r++)
        !(function () {
          var e = t[r];
          o.push(
            n[e].pipe(
              f.map(function (n) {
                var t = {};
                return (t[e] = n), t;
              })
            )
          );
        })();
    };
  }
  (n.default = function (n) {
    var r = new p.Subject(),
      o = new p.BehaviorSubject({}),
      u = new p.Subject(),
      t = [],
      i = { data: {} },
      e = null,
      c = p.pipe();
    return (
      n({
        props$: o,
        onDestroy: function (n) {
          return (e = "function" == typeof n ? n : function () {});
        },
        resolve: s(t),
        setIntercept: function (n) {
          return (c = n);
        },
      }),
      p.merge
        .apply(null, [o].concat(t))
        .pipe(
          f.takeUntil(u),
          f.map(function (n) {
            return (i.data = Object.assign({}, i.data, n)), i.data;
          }),
          c
        )
        .subscribe(
          function () {
            return r.next();
          },
          function (n) {
            return console.error(n);
          },
          e
        ),
      function (n) {
        function t() {
          o.next(arguments[0]), a.Component.apply(this, arguments);
        }
        var e = (t.prototype = Object.create(a.Component.prototype));
        return (
          (e.constructor = t),
          (e.componentDidMount = function () {
            var n = this;
            r.pipe(f.takeUntil(u)).subscribe(function () {
              return n.forceUpdate();
            });
          }),
          (e.componentWillUnmount = function () {
            u.next();
          }),
          (e.shouldComponentUpdate = function (n) {
            return (
              (function (n, t) {
                for (var e in n) if (!(e in t) || n[e] !== t[e]) return;
                for (var e in t) if (!(e in n) || n[e] !== t[e]) return;
                return 1;
              })(this.props, n) || o.next(n),
              !1
            );
          }),
          (e.render = function () {
            return a.createElement(n, i.data);
          }),
          t
        );
      }
    );
  }),
    Object.defineProperty(n, "__esModule", { value: !0 });
});
